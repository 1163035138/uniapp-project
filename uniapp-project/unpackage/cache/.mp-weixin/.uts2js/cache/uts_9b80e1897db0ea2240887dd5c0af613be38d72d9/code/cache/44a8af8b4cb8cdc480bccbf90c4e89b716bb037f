{"code":"import { defineComponent } from \"vue\";\nimport { props } from './props';\nimport { mpMixin } from '../../libs/mixin/mpMixin';\nimport { mixin } from '../../libs/mixin/mixin';\nimport { addUnit, addStyle } from '../../libs/function/index';\n/**\n * search 搜索框\n * @description 搜索组件，集成了常见搜索框所需功能，用户可以一键引入，开箱即用。\n * @tutorial https://ijry.github.io/uview-plus/components/search.html\n * @property {String}\t\t\tshape\t\t\t\t搜索框形状，round-圆形，square-方形（默认 'round' ）\n * @property {String}\t\t\tbgColor\t\t\t\t搜索框背景颜色（默认 '#f2f2f2' ）\n * @property {String}\t\t\tplaceholder\t\t\t占位文字内容（默认 '请输入关键字' ）\n * @property {Boolean}\t\t\tclearabled\t\t\t是否启用清除控件（默认 true ）\n * @property {Boolean}\t\t\tfocus\t\t\t\t是否自动获得焦点（默认 false ）\n * @property {Boolean}\t\t\tshowAction\t\t\t是否显示右侧控件（默认 true ）\n * @property {Object}\t\t\tactionStyle\t\t\t右侧控件的样式，对象形式\n * @property {String}\t\t\tactionText\t\t\t右侧控件文字（默认 '搜索' ）\n * @property {String}\t\t\tinputAlign\t\t\t输入框内容水平对齐方式 （默认 'left' ）\n * @property {Object}\t\t\tinputStyle\t\t\t自定义输入框样式，对象形式\n * @property {Boolean}\t\t\tdisabled\t\t\t是否启用输入框（默认 false ）\n * @property {String}\t\t\tborderColor\t\t\t边框颜色，配置了颜色，才会有边框 (默认 'transparent' )\n * @property {String}\t\t\tsearchIconColor\t\t搜索图标的颜色，默认同输入框字体颜色 (默认 '#909399' )\n * @property {Number | String}\tsearchIconSize 搜索图标的字体，默认22\n * @property {String}\t\t\tcolor\t\t\t\t输入框字体颜色（默认 '#606266' ）\n * @property {String}\t\t\tplaceholderColor\tplaceholder的颜色（默认 '#909399' ）\n * @property {String}\t\t\tsearchIcon\t\t\t输入框左边的图标，可以为uView图标名称或图片路径  (默认 'search' )\n * @property {String}\t\t\ticonPosition\t\t输入框图标位置，left-左边, right-右边  (默认 'left' )\n * @property {String}\t\t\tmargin\t\t\t\t组件与其他上下左右元素之间的距离，带单位的字符串形式，如\"30px\"   (默认 '0' )\n * @property {Boolean} \t\t\tanimation\t\t\t是否开启动画，见上方说明（默认 false ）\n * @property {String}\t\t\tvalue\t\t\t\t输入框初始值\n * @property {String | Number}\tmaxlength\t\t\t输入框最大能输入的长度，-1为不限制长度  (默认 '-1' )\n * @property {String | Number}\theight\t\t\t\t输入框高度，单位px（默认 64 ）\n * @property {String | Number}\tlabel\t\t\t\t搜索框左边显示内容\n * @property {Boolean}\t        adjustPosition\t    键盘弹起时，是否自动上推页面\n * @property {Boolean}\t        autoBlur\t        键盘收起时，是否自动失去焦点\n * @property {Object}\t\t\tcustomStyle\t\t\t定义需要用到的外部样式\n *\n * @event {Function} change 输入框内容发生变化时触发\n * @event {Function} search 用户确定搜索时触发，用户按回车键，或者手机键盘右下角的\"搜索\"键时触发\n * @event {Function} custom 用户点击右侧控件时触发\n * @event {Function} clear 用户点击清除按钮时触发\n * @example <u-search placeholder=\"日照香炉生紫烟\" v-model=\"keyword\"></u-search>\n */\nexport default defineComponent({\n    name: \"u-search\",\n    mixins: [mpMixin, mixin, props],\n    data() {\n        return {\n            keyword: '',\n            showClear: false,\n            show: false,\n            // 标记input当前状态是否处于聚焦中，如果是，才会显示右侧的清除控件\n            focused: this.focus\n            // 绑定输入框的值\n            // inputValue: this.value\n        };\n    },\n    watch: {\n        keyword(nVal = null) {\n            // 双向绑定值，让v-model绑定的值双向变化\n            this.$emit(\"update:modelValue\", nVal);\n            // 触发change事件，事件效果和v-model双向绑定的效果一样，让用户多一个选择\n            this.$emit('change', nVal);\n        },\n        modelValue: {\n            immediate: true,\n            handler(nVal = null) {\n                this.keyword = nVal;\n            }\n        },\n    },\n    computed: {\n        showActionBtn() {\n            return !this.animation && this.showAction;\n        }\n    },\n    emits: ['clear', 'search', 'custom', 'focus', 'blur', 'click', 'clickIcon', 'update:modelValue', 'change'],\n    methods: {\n        addStyle,\n        addUnit,\n        // 目前HX2.6.9 v-model双向绑定无效，故监听input事件获取输入框内容的变化\n        inputChange(e = null) {\n            this.keyword = e.detail.value;\n        },\n        // 清空输入\n        // 也可以作为用户通过this.$refs形式调用清空输入框内容\n        clear() {\n            this.keyword = '';\n            // 延后发出事件，避免在父组件监听clear事件时，value为更新前的值(不为空)\n            this.$nextTick(() => {\n                this.$emit('clear');\n            });\n        },\n        // 确定搜索\n        search(e = null) {\n            this.$emit('search', e.detail.value);\n            try {\n                // 收起键盘\n                uni.hideKeyboard();\n            }\n            catch (e) { }\n        },\n        // 点击右边自定义按钮的事件\n        custom() {\n            this.$emit('custom', this.keyword);\n            try {\n                // 收起键盘\n                uni.hideKeyboard();\n            }\n            catch (e) { }\n        },\n        // 获取焦点\n        getFocus() {\n            this.focused = true;\n            // 开启右侧搜索按钮展开的动画效果\n            if (this.animation && this.showAction)\n                this.show = true;\n            this.$emit('focus', this.keyword);\n        },\n        // 失去焦点\n        blur() {\n            // 最开始使用的是监听图标@touchstart事件，自从hx2.8.4后，此方法在微信小程序出错\n            // 这里改为监听点击事件，手点击清除图标时，同时也发生了@blur事件，导致图标消失而无法点击，这里做一个延时\n            setTimeout(() => {\n                this.focused = false;\n            }, 100);\n            this.show = false;\n            this.$emit('blur', this.keyword);\n        },\n        // 点击搜索框，只有disabled=true时才发出事件，因为禁止了输入，意味着是想跳转真正的搜索页\n        clickHandler() {\n            if (this.disabled)\n                this.$emit('click');\n        },\n        // 点击左边图标\n        clickIcon(e = null) {\n            this.$emit('clickIcon', this.keyword);\n            try {\n                // 收起键盘\n                uni.hideKeyboard();\n            }\n            catch (e) { }\n        }\n    }\n});\n//# sourceMappingURL=C:/Users/86150/Desktop/%E5%BC%A0%E4%BA%9A%E5%86%AC%E9%A1%B9%E7%9B%AE/uniapp-project/uni_modules/uview-plus/components/u-search/u-search.vue?vue&type=script&lang.uts.js.map","references":["C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/components/u-search/props.js","C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/libs/mixin/mpMixin.js","C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/libs/mixin/mixin.js","C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/libs/function/index.js"],"uniExtApis":["uni.hideKeyboard"],"map":"{\"version\":3,\"file\":\"u-search.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"u-search.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
