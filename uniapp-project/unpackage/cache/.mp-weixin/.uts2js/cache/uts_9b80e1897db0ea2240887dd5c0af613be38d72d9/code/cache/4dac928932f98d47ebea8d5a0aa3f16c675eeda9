{"code":"import { defineComponent } from \"vue\";\nimport { props } from './props';\nimport { mpMixin } from '../../libs/mixin/mpMixin';\nimport { mixin } from '../../libs/mixin/mixin';\nimport { addUnit, addStyle, deepMerge, sleep, getWindowInfo } from '../../libs/function/index';\n/**\n * popup 弹窗\n * @description 弹出层容器，用于展示弹窗、信息提示等内容，支持上、下、左、右和中部弹出。组件只提供容器，内部内容由用户自定义\n * @tutorial https://ijry.github.io/uview-plus/components/popup.html\n * @property {Boolean}\t\t\tshow\t\t\t\t是否展示弹窗 (默认 false )\n * @property {Boolean}\t\t\toverlay\t\t\t\t是否显示遮罩 （默认 true ）\n * @property {String}\t\t\tmode\t\t\t\t弹出方向（默认 'bottom' ）\n * @property {String | Number}\tduration\t\t\t动画时长，单位ms （默认 300 ）\n * @property {String | Number}\toverlayDuration\t\t遮罩层动画时长，单位ms （默认 350 ）\n * @property {Boolean}\t\t\tcloseable\t\t\t是否显示关闭图标（默认 false ）\n * @property {Object | String}\toverlayStyle\t\t自定义遮罩的样式\n * @property {String | Number}\toverlayOpacity\t\t遮罩透明度，0-1之间（默认 0.5）\n * @property {Boolean}\t\t\tcloseOnClickOverlay\t点击遮罩是否关闭弹窗 （默认  true ）\n * @property {String | Number}\tzIndex\t\t\t\t层级 （默认 10075 ）\n * @property {Boolean}\t\t\tsafeAreaInsetBottom\t是否为iPhoneX留出底部安全距离 （默认 true ）\n * @property {Boolean}\t\t\tsafeAreaInsetTop\t是否留出顶部安全距离（状态栏高度） （默认 false ）\n * @property {String}\t\t\tcloseIconPos\t\t自定义关闭图标位置（默认 'top-right' ）\n * @property {String | Number}\tround\t\t\t\t圆角值（默认 0）\n * @property {Boolean}\t\t\tzoom\t\t\t\t当mode=center时 是否开启缩放（默认 true ）\n * @property {Object}\t\t\tcustomStyle\t\t\t组件的样式，对象形式\n * @event {Function} open 弹出层打开\n * @event {Function} close 弹出层收起\n * @example <u-popup v-model:show=\"show\"><text>出淤泥而不染，濯清涟而不妖</text></u-popup>\n */\nexport default defineComponent({\n    name: 'u-popup',\n    mixins: [mpMixin, mixin, props],\n    data() {\n        return {\n            overlayDuration: this.duration + 50\n        };\n    },\n    watch: {\n        show(newValue = null, oldValue = null) {\n            if (newValue === true) {\n                const children = this.$children;\n                this.retryComputedComponentRect(children);\n            }\n        }\n    },\n    computed: {\n        transitionStyle() {\n            const style = new UTSJSONObject({\n                zIndex: this.zIndex,\n                position: 'fixed',\n                display: 'flex',\n            });\n            style[this.mode] = 0;\n            if (this.mode === 'left') {\n                return deepMerge(style, new UTSJSONObject({\n                    bottom: 0,\n                    top: 0,\n                }));\n            }\n            else if (this.mode === 'right') {\n                return deepMerge(style, new UTSJSONObject({\n                    bottom: 0,\n                    top: 0,\n                }));\n            }\n            else if (this.mode === 'top') {\n                return deepMerge(style, new UTSJSONObject({\n                    left: 0,\n                    right: 0\n                }));\n            }\n            else if (this.mode === 'bottom') {\n                return deepMerge(style, new UTSJSONObject({\n                    left: 0,\n                    right: 0,\n                }));\n            }\n            else if (this.mode === 'center') {\n                return deepMerge(style, new UTSJSONObject({\n                    alignItems: 'center',\n                    'justify-content': 'center',\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0\n                }));\n            }\n        },\n        contentStyle() {\n            const style = new UTSJSONObject({}\n            // 通过设备信息的safeAreaInsets值来判断是否需要预留顶部状态栏和底部安全局的位置\n            // 不使用css方案，是因为nvue不支持css的iPhoneX安全区查询属性\n            );\n            // 通过设备信息的safeAreaInsets值来判断是否需要预留顶部状态栏和底部安全局的位置\n            // 不使用css方案，是因为nvue不支持css的iPhoneX安全区查询属性\n            const safeAreaInsets = getWindowInfo().safeAreaInsets;\n            if (this.mode !== 'center') {\n                style.flex = 1;\n            }\n            // 背景色，一般用于设置为transparent，去除默认的白色背景\n            if (this.bgColor) {\n                style.backgroundColor = this.bgColor;\n            }\n            if (this.round) {\n                const value = addUnit(this.round);\n                if (this.mode === 'top') {\n                    style.borderBottomLeftRadius = value;\n                    style.borderBottomRightRadius = value;\n                }\n                else if (this.mode === 'bottom') {\n                    style.borderTopLeftRadius = value;\n                    style.borderTopRightRadius = value;\n                }\n                else if (this.mode === 'center') {\n                    style.borderRadius = value;\n                }\n            }\n            return deepMerge(style, addStyle(this.customStyle));\n        },\n        position() {\n            if (this.mode === 'center') {\n                return this.zoom ? 'fade-zoom' : 'fade';\n            }\n            if (this.mode === 'left') {\n                return 'slide-left';\n            }\n            if (this.mode === 'right') {\n                return 'slide-right';\n            }\n            if (this.mode === 'bottom') {\n                return 'slide-up';\n            }\n            if (this.mode === 'top') {\n                return 'slide-down';\n            }\n        },\n    },\n    emits: [\"open\", \"close\", \"click\", \"update:show\"],\n    methods: {\n        // 点击遮罩\n        overlayClick() {\n            if (this.closeOnClickOverlay) {\n                this.$emit('update:show', false);\n                this.$emit('close');\n            }\n        },\n        open(e = null) {\n            this.$emit('update:show', true);\n        },\n        close(e = null) {\n            this.$emit('update:show', false);\n            this.$emit('close');\n        },\n        afterEnter() {\n            this.$emit('open');\n        },\n        clickHandler() {\n            // 由于中部弹出时，其u-transition占据了整个页面相当于遮罩，此时需要发出遮罩点击事件，是否无法通过点击遮罩关闭弹窗\n            if (this.mode === 'center') {\n                this.overlayClick();\n            }\n            this.$emit('click');\n        },\n        retryComputedComponentRect(children = null) {\n            // 组件内部需要计算节点的组件\n            const names = ['u-calendar-month', 'u-album', 'u-collapse-item', 'u-dropdown', 'u-index-item', 'u-index-list',\n                'u-line-progress', 'u-list-item', 'u-rate', 'u-read-more', 'u-row', 'u-row-notice', 'u-scroll-list',\n                'u-skeleton', 'u-slider', 'u-steps-item', 'u-sticky', 'u-subsection', 'u-swipe-action-item', 'u-tabbar',\n                'u-tabs', 'u-tooltip'\n            ];\n            // 历遍所有的子组件节点\n            for (let i = 0; i < children.length; i++) {\n                const child = children[i];\n                // 拿到子组件的子组件\n                const grandChild = child.$children;\n                // 判断如果在需要重新初始化的组件数组中名中，并且存在init方法的话，则执行\n                if (names.includes(child.$options.name) && typeof (child === null || child === void 0 ? null : child.init) === 'function') {\n                    // 需要进行一定的延时，因为初始化页面需要时间\n                    sleep(50).then(() => {\n                        child.init();\n                    });\n                }\n                // 如果子组件还有孙组件，进行递归历遍\n                if (grandChild.length) {\n                    this.retryComputedComponentRect(grandChild);\n                }\n            }\n        }\n    }\n});\n//# sourceMappingURL=C:/Users/86150/Desktop/%E5%BC%A0%E4%BA%9A%E5%86%AC%E9%A1%B9%E7%9B%AE/uniapp-project/uni_modules/uview-plus/components/u-popup/u-popup.vue?vue&type=script&lang.uts.js.map","references":["C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/components/u-popup/props.js","C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/libs/mixin/mpMixin.js","C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/libs/mixin/mixin.js","C:/Users/86150/Desktop/张亚冬项目/uniapp-project/uni_modules/uview-plus/libs/function/index.js"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"u-popup.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"u-popup.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
